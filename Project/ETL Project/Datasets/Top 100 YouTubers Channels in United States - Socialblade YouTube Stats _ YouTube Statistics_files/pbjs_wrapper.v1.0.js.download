"use strict";function wrapperPbjs(e){e.startTime=Date.now();const i=e.wPbjs||{};i.cmd=e.wPbjs.cmd||[],e.pWindow=void 0;try{e.parent.parent.document,e.pWindow=e.parent.parent.window}catch(i){try{e.parent.document,e.pWindow=e.parent.window}catch(i){e.pWindow=e}}const d="https://hb.brainlyads.com/metrics",t=12e5;let n=null,o=null,r=!1,s=!1,a=[],g=[],c={},p={},l={},b=!1,u=!1,m="",w="",h=[],f={},A=void 0,j=0;i.debug=!!("1"===function(i){let d=e.document.cookie.match(new RegExp("(?:^|; )"+i.replace(/([\.$?*|{}\(\)\[\]\\\/\\+^])/g,"\\$1")+"=([^;]*)"));return d?decodeURIComponent(d[1]):void 0}("hbdebug")||e.pWindow.location&&e.pWindow.location.search&&e.pWindow.location.search.replace(/^\\?/,"").split("&").some(e=>"hbdebug=1"===e)),i.run=function(r){if(v.logger.log(`wPbjs.run (${r&&r.divId}) >>>`,i),r){if(e.pbjsAuctionId=o=r.auctionId,Array.isArray(r.customTargetings)){let e=r.customTargetings.find(e=>"refresh"==e[0]);e&&(j=parseInt(e[1])||0),r.unitIds.keyValueRefresh=j}e.pbjs.analyticAdapterOptions.data[o]={unitIds:r.unitIds},e.pbjs.adUnitExpire[o]=Date.now()+t,r.debug&&(i.debug=!0),v.logger.log("wPbjs => wPbjs.run >>> ",r,e.pbjs.analyticAdapterOptions),r.adUnitCodeToDFPPath&&(p=r.adUnitCodeToDFPPath),r.biddingRule&&(l=r.biddingRule),r.skipDFP&&(u=r.skipDFP),r.codeAdUnit&&(m=r.codeAdUnit),r.divId&&(w=r.divId),r.adUnits&&(a=r.adUnits),r.unitRule&&(g=r.unitRule),r.nmAd&&(f=r.nmAd),!r.skipDFP&&r.customTargetings&&(h=r.customTargetings),r.schain&&(A={ver:"1.0",complete:1,nodes:[{asi:r.schain.asi,sid:r.schain.sellerId,hp:1}]}),r.amazonBids&&(!function(i){!function(e,i,d,t,n,o,r){function s(d,t){i[e]._Q.push([d,t])}i[e]||(i[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(o=d.createElement(t)).async=!0,o.src="//c.amazon-adsystem.com/aax2/apstag.js",(r=d.getElementsByTagName(t)[0]).parentNode.insertBefore(o,r))}("apstag",e,e.document,"script"),e.apstag.init({pubID:"79e40b05-e673-4b6c-85f9-79252a7f96a5",adServer:"googletag",schain:A,bidTimeout:2e3}),e.apstag.fetchBids({slots:[{slotID:i.divId,slotName:i.codeAdUnit,sizes:i.sizesAdUnit}]},function(d){e.googletag.cmd.push(function(){e.apstag.setDisplayBids(),s?i.skipDFP?P():e.googletag.pubads().refresh([n]):s=!0})})}(r),b=r.amazonBids),function(i){v.logger.log(`wPbjs => (${w}) loadScripts!!!!!`);const d={src:"https://www.googletagservices.com/tag/js/gpt.js",async:!0};let t=[];i.skipDFP||t.push(d);i.isBidderSublime&&t.push({src:`//sac.ayads.co/sublime/${i.sublimeZoneId}/prebid`,async:!1});_loadJSScripts(e,t)}(r),r.type&&1!=r.type?function(i){v.logger.log(`wPbjs => (${w}) >>> prebid video!!!!!`),e.adUnitSize=null,E(i.deducts),e.pbjs.que.push(function(){const d={debug:i.debug,priceGranularity:"high",consentManagement:{usp:{cmpApi:"iab",timeout:i.usPrivacyTimeout}},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}},cache:{url:i.cacheUrl},schain:{validation:"strict",config:A}};i.isGdrpIp&&(d.consentManagement.gdpr={cmpApi:"iab",defaultGdprScope:!0}),v.logger.log(`wPbjs => (${w}) pbjsConfig`,d),e.pbjs.setConfig(d),e.pbjs.addAdUnits(i.adUnits),e.pbjs.eventBidWonFuncs[o]={expire:Date.now()+t},e.pbjs.eventBidWonFuncs[o].func=function(i){v.logger.log(`wPbjs => (${w}) event bidWon`);try{e.pWindow.hb_win||(e.pWindow.hb_win={});var d=unitIds[i.adUnitCode];e.pWindow.hb_win[d]||(e.pWindow.hb_win[d]={}),e.pWindow.hb_win[d][i.bidderCode]||(e.pWindow.hb_win[d][i.bidderCode]=0),e.pWindow.hb_win[d][i.bidderCode]++}catch(e){}},e.pbjs.requestBids({auctionId:o,bidsBackHandler:_,timeout:3e3})})}(r):function(i){v.logger.log(`wPbjs => (${w}) >>> prebid banner!!!!! (Skip GAM = ${i.skipDFP})`),e.apAds=new Event("apAds"),e.apAdsLine=new Event("apAds_line"),e.apAdsX=new Event("apAds_x"),e.apAdsHide=new Event("apAds_hide"),e.adUnitSize=null,i.skipDFP?(console.log("frameWindow.googletag >>>",e.googletag),e.googletag.pubads=function(){let d=e.document.getElementById(i.divId);return d}):e.googletag.cmd.push(function(){e.googletag.pubads().disableInitialLoad()});if(E(i.deducts),e.pbjs.que.push(function(){e.startAuctionTime=Date.now();const n={debug:i.debug,priceGranularity:"high",consentManagement:{usp:{cmpApi:"iab",timeout:i.usPrivacyTimeout}},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}}},schain:{validation:"strict",config:A}};i.isLiveRamp&&(n.userSync.userIds=[{name:"identityLink",params:{pid:i.liverampPartnerId},storage:{type:"cookie",name:"idl_env",expires:1}}],n.userSync.syncDelay=i.userSyncDelay),i.isGdrpIp&&(n.consentManagement.gdpr={cmpApi:"iab",defaultGdprScope:!0}),i.pbsBidders.length&&(v.logger.log("Serverside!"),n.s2sConfig={accountId:"1",enabled:!0,bidders:i.pbsBidders,endpoint:"https://prebid.nextmillmedia.com/openrtb2/auction",adapter:"prebidServer",cookieSet:!0,syncEndpoint:"https://prebid.nextmillmedia.com/cookie_sync"}),v.logger.log("wPbjs => pbjsConfig",n),e.pbjs.setConfig(n),e.pbjs.eventBidWonFuncs[o]={expire:Date.now()+t},e.pbjs.eventBidWonFuncs[o].func=function(t){if(!a.some(e=>e.code==t.adUnitCode))return;e.renderAdTime=Date.now(),function(i,t){v.logger.log(`wPbjs => (${w}) >>> sendMetrics`),fetch(d,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({name:t&&t.name,domain:t&&t.domain,bidder:i.bidderCode,metrics:{prebidStartDuration:e.startAuctionTime-e.startTime,auctionDuration:e.endAuctionTime-e.startAuctionTime,renderAdDuration:e.renderAdTime-e.endAuctionTime}})})}(t,i.unit),v.logger.log(`wPbjs => (${w}) >>> runned pbjs.renderAd`,t.adUnitCode);try{e.pWindow.hb_win||(e.pWindow.hb_win={});let d=i.unitIds[t.adUnitCode];e.pWindow.hb_win[d]||(e.pWindow.hb_win[d]={}),e.pWindow.hb_win[d][t.bidderCode]||(e.pWindow.hb_win[d][t.bidderCode]=0),e.pWindow.hb_win[d][t.bidderCode]++}catch(e){}let n=i.bidderOptions||{},r=i.size1x1||{};"gumgum"==t.bidderCode&&(v.logger.log("wPbjs => apAds_hide now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide),v.logger.log("wPbjs => option remove code (bidder: "+t.bidderCode+")"),e.pWindow.document.querySelector("head").appendChild(e.pWindow.document.createElement("script")).innerHTML=`setTimeout(function(){for(let i of window.document.querySelectorAll('[id^=ad_is]')){try{i.remove();} catch(e) {console.log('error removing apAds ad:');}}},${i.gumgumRemovalTime})`);let s=a.find(e=>e.code===t.adUnitCode);if(!s)return void v.logger.log(`wPbjs (${w}) >>> error: ad unit not found`,t.adUnitCode);"undertone"==t.bidderCode&&(v.logger.log("wPbjs => apAds now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAds),n[t.bidderCode].hideAd&&(v.logger.log("wPbjs => apAds_hide now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide)),n[t.bidderCode].removeX&&(v.logger.log("wPbjs => apAds_x now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsX)),n[t.bidderCode].removeCode&&(v.logger.log("wPbjs => option remove code (bidder: "+t.bidderCode+")"),e.pWindow.document.querySelector("head").appendChild(e.pWindow.document.createElement("script")).innerHTML=`setTimeout(function(){try{window.document.querySelector('.ut_container').remove();} catch(e) {console.log('error removing apAds ad:');}},${i.gumgumRemovalTime})`),r[t.bidderCode]&&!s.sizes.some(e=>e[0]===t.width&&e[1]===t.height)&&n[t.bidderCode].inlineHeight&&(v.logger.log("wPbjs => apAds_line now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsLine)));let g=!1;"teads"==t.bidderCode&&r.teads&&n.teads.apAdsDiv&&(1===t.width&&1===t.height||!s.sizes.some(e=>e[0]===t.width&&e[1]===t.height))&&(v.logger.log("wPbjs => apAds_div now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAds),g=!0,new CustomEvent("apAds_div",{detail:t.adUnitCode}),e.document.dispatchEvent(e.apAdsDiv)),["justpremium","sublime","teads","triplelift"].indexOf(t.bidderCode)>-1&&r[t.bidderCode]&&!s.sizes.some(e=>e[0]===t.width&&e[1]===t.height)&&(n[t.bidderCode].stopRefresh&&(v.logger.log("wPbjs => apAds now fired (bidder: "+t.bidderCode+")"),g||(e.document.dispatchEvent(e.apAds),g=!0)),n[t.bidderCode].inlineHeight&&(v.logger.log("wPbjs => apAds_line now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsLine)),n[t.bidderCode].removeX&&(v.logger.log("wPbjs => apAds_x now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsX)),n[t.bidderCode].hideAd&&(v.logger.log("wPbjs => apAds_hide now fired (bidder: "+t.bidderCode+")"),e.document.dispatchEvent(e.apAdsHide))),setTimeout(deleteEventBidWon,1e4,o)},e.pbjs.addAdUnits(i.adUnits),e.pbjs.requestBids({auctionId:o,adUnitCodes:i.adUnits.map(e=>e.code),bidsBackHandler:C,timeout:i.prebidBidTimeout})}),c={},!i.skipDFP){let d=[];i.sizeFluid&&d.push("fluid"),(!i.sizeFluid||i.sizeFluid&&!i.sizeFluidOnlyForGAM)&&(d=d.concat(i.sizesAdUnit)),e.googletag.cmd.push(function(){n=e.googletag.defineSlot(i.codeAdUnit,d,i.divId).addService(e.googletag.pubads()),e.googletag.pubads().enableSingleRequest(),e.googletag.enableServices()})}setTimeout(C,3500)}(r)}};const v={logger:{log(){i.debug&&console.log.apply(console,arguments)},error(){i.debug&&console.error.apply(console,arguments)}}};function y(e){if("function"==typeof e)try{e.call()}catch(e){v.logger.error("Error processing command:",e.message,e.stack)}else v.logger.error("Command is not a function")}function C(){v.logger.log(`wPbjs => (${w}) >>> func initAdserver - satrt, pbjs.initAdserverSet =`,r),r||(e.endAuctionTime=Date.now(),r=!0,u?function(){v.logger.log(`wPbjs => (${w}) >>> initAdserverBannerSkipGAM`),e.googletag.cmd&&e.googletag.cmd[0]&&e.googletag.cmd[0]();let i=new CustomEvent("slotRenderEnded");i.isEmpty=!0,e.pbjs.que.push(function(){let d=S(U()),t=d.adUnitCode;if(v.logger.log("wPbjs => func initAdserver - selectWin, winAdUnitCode =",t),d.isWin){i.isEmpty=!1,i.size=e.adUnitSize;let d=e.pbjs.getAdserverTargetingForAdUnitCode(t);v.logger.log("wPbjs => func initAdserver - getAdserverTargetingForAdUnitCode, winTargetData =",d),d=JSON.parse(JSON.stringify(d)),c[t]=d,c[t].rendered=!1,e.dataPbjsWin={},e.dataPbjsWin[t]=d;let n=new Event("setTargeting");e.document.dispatchEvent(n),b?s?(v.logger.log("wPbjs => func initAdserver - run func renderAd"),P()):(v.logger.log("wPbjs => func initAdserver - set finishedSettingBidsForOther=true"),s=!0,setTimeout(function(){v.logger.log("wPbjs => start timeout func renderAd"),P()},1500)):(v.logger.log("wPbjs => func initAdserver - run func renderAd"),P())}e.googletag.pubads().dispatchEvent(i)})}():(v.logger.log(`wPbjs => (${w}) >>> initAdserverBannerGAM`),e.googletag.cmd.push(function(){e.pbjs.que.push(function(){let i=S(U()),d=i.adUnitCode,t=i.bidData;if(v.logger.log(`wPbjs => (${w}) winAdUnitCode = ${d}`),h.forEach(e=>{Array.isArray(e)&&e.length>1&&n.setTargeting(String(e[0]),String(e[1]))}),i.gamCpm&&!i.isWin&&(n.setTargeting("fp_pb",i.gamCpm.toFixed(2)),n.setTargeting("nm_id",f.id)),v.logger.log(`wPbjs => (${w}) >>> winAdUnitCode = ${d}`),i.isWin){v.logger.log(`wPbjs => (${w}) >>> set targetings, winAdUnitCode = ${d}`);let e=t.adserverTargeting;Object.keys(e).forEach(i=>{n.setTargeting(i,e[i])});let o=e&&parseFloat(e.hb_pb);if(i.gamCpm&&i.maxCpm<i.gamCpm&&(o=i.gamCpm,n.setTargeting("hb_pb",o.toFixed(2))),e&&l[e.hb_bidder]&&l[e.hb_bidder].value){if(Number.isNaN(o))return;let i=1==l[e.hb_bidder].type&&l[e.hb_bidder].value||2==l[e.hb_bidder].type&&l[e.hb_bidder].value*o||0;if(!i)return;let t=o+i;t=t.toFixed(2),n.setTargeting("hb_pb",t),v.logger.log(`wPbjs => (${w}) set targetings, winAdUnitCode = `,d,"hb_bidder=",e.hb_bidder,"hb_pb=",e.hb_pb,"google hb_pb=",t);let r="hb_pb_"+e.hb_bidder;n.getTargeting(r).length&&(n.setTargeting(r,t),v.logger.log(`wPbjs => (${w}) >>> set targetings, winAdUnitCode = `,d,"hb_bidder=",e.hb_bidder,"hb_pb=",e.hb_pb,"google "+r+"=",t))}}b?s?e.googletag.pubads().refresh([n]):s=!0:(v.logger.log(`wPbjs (${w}) >>> refresh!`,n),e.googletag.pubads().refresh([n]))})})))}function P(){if(v.logger.log(`wPbjs => (${w}) >>> renderAd - start`),!c)return;let i=Object.keys(c);v.logger.log(`wPbjs => (${w}) func renderAd - codes = `,i),i.forEach(i=>{if(c[i].rendered)return;c[i].rendered=!0;let d=e.document.getElementById(w);if(v.logger.log(`wPbjs => (${w}) func renderAd - block = `,d),!d)return;let t=e.document.createElement("iframe");t.id=`google_ads_iframe_${w}_0`,t.setAttribute("frameborder",0),t.setAttribute("scrolling","no"),t.setAttribute("marginheight","0"),t.setAttribute("marginwidth","0"),t.setAttribute("hspace","0"),t.setAttribute("vspace","0"),t.setAttribute("topmargin",0),t.setAttribute("leftmargin",0),t.setAttribute("allowtransparency",!0),t.setAttribute("width",0),t.setAttribute("height",0),t.setAttribute("border","0px"),t.style.border="0",d.appendChild(t);let n=c[i],o=t.contentWindow.document;n&&n.hb_adid&&(v.logger.log(`wPbjs => (${w}) func renderAd - RUN pbjs.renderAd, adServerTargeting = `,n),e.pbjs.renderAd(o,n.hb_adid)),delete c[i]})}function U(){return a.map(e=>e.code).reduce((i,d)=>{let t=e.pbjs.getBidResponsesForAdUnitCode(d);return t&&(i[d]=t),i},{})}function _(){v.logger.log(`wPbjs => (${w}) >>> run initAdserver video`);let i=S(U()).adUnitCode,d=i||Object.keys(p)[0],t=pbjs.adServers.dfp.buildVideoUrl({adUnit:a.find(function(e){return e.code==d}),bid:!i&&{}||void 0,params:{iu:p[d],cust_params:h.reduce((e,i)=>(Array.isArray(i)&&i.length>1&&(e[String(i[0])]=String(i[1])),e),{}),output:"vast"}});i&&e.pbjs.markWinningBidAsUsed({adUnitCode:i}),v.logger.log(`wPbjs => (${w}) >>> vastURL =`,t);let n=e.document.getElementById(w);n&&e.vastAd&&e.vastAd(t,n)}function S(i){v.logger.log(`wPbjs => (${w}) >>> selectWin`,i);let d=g,t=Object.keys(i),n=[];for(let e=0;e<t.length;e++){let d=a.find(i=>i.code===t[e]),o=0;n.push({winAdUnitCode:"",winAdUnitData:null});for(let r=0;r<i[t[e]].bids.length;r++)v.logger.log(`wPbjs => (${w}) Respopnse: adUnitCode=`+t[e]+" cpm=$"+i[t[e]].bids[r].cpm+" bidder="+i[t[e]].bids[r].bidder+" unitSizes="+JSON.stringify(d.sizes)+" responseSize=["+i[t[e]].bids[r].width+","+i[t[e]].bids[r].height+"]"),i[t[e]].bids[r].cpm>o&&(n[e].winAdUnitCode=t[e],n[e].winAdUnitData=i[t[e]].bids[r],o=i[t[e]].bids[r].cpm)}v.logger.log(`wPbjs => (${w}) winsAdUnit >>>`,n);let o,r={isWin:!1,adUnitCode:"",bidData:null,maxCpm:0,gamCpm:0},s=d.find(e=>"gam"===e.code);r.gamCpm=s&&s.price||0;for(let e=0;e<n.length;e++)n[e].winAdUnitCode&&n[e].winAdUnitData.cpm>r.maxCpm&&(r.adUnitCode=n[e].winAdUnitCode,r.bidData=n[e].winAdUnitData,r.maxCpm=n[e].winAdUnitData.cpm);if(v.logger.log(`wPbjs => (${w}) response >>>`,r),r.adUnitCode){o=a.find(e=>e.code===r.adUnitCode);let e=d.find(e=>e.code===r.bidData.bidderCode),i=e&&e.price;if(!i&&"rhythmone"==r.bidData.bidderCode){let e=o.bids.find(e=>"rhythmone"==e.bidder);i=e&&e.params&&e.params.floor||options.defaultFloorRhythmone}(!i||i&&i<=r.bidData.cpm)&&(r.isWin=!0)}return r.isWin&&(e.adUnitSize=[r.bidData.width,r.bidData.height],v.logger.log(`wPbjs => (${w}) Winner: adUnitCode=`+r.adUnitCode+" cpm=$"+r.bidData.cpm+" bidder="+r.bidData.bidder+" unitSizes="+JSON.stringify(o.sizes)+" responseSize=["+r.bidData.width+","+r.bidData.height+"]")),r}function E(i){let d=Object.keys(i);if(!i||d.length)return null;let t={};for(let e=0;e<d.length;e++)t[d[e]]={bidCpmAdjustment:function(t,n){return t*i[d[e]]}};e.pbjs.bidderSettings=t}i.renderAd=function(e,i){if(!f.id)return;v.logger.log(`wPbjs => (${w})renderAd - fakeAd nmAd.id=${f.id}`),e.defaultView.frameElement.width=f.size[0]||300,e.defaultView.frameElement.height=f.size[1]||250;let d=f.url||`https://hb.brainlyads.com/images/${f.img}`,t=e.createElement("img");t.src=d,t.style.padding="0px",t.style.margin="0px",t.style.border="0px",e.body.appendChild(t)},i.cmd.push=y,i.cmd.forEach(e=>{y(e)})}function loadJSScripts(e,i){console.log("loadJSScripts!!!!!");let d=[];const t={src:"https://hb.brainlyads.com/prebid.nm.1.0.js",async:!0};d.push({src:"https://js-sec.indexww.com/ht/p/188333-91751857837145.js",async:!0}),d.push(t),_loadJSScripts(e,d,i)}function _loadJSScripts(e,i,d){if(!Array.isArray(i))return;let t=e.document.getElementsByTagName("script")[0],n=0;i.forEach(o=>{let r=e.document.createElement("script");r.async=!!o.async,r.type="text/javascript",r.src=o.src,"function"==typeof d&&(r.onload=function(){++n==i.length&&d()}),t.parentNode.insertBefore(r,t)})}function deleteEventBidWon(e){window.pbjs.eventBidWonFuncs[e]&&delete window.pbjs.eventBidWonFuncs[e]}function cleanerAdUnitExpire(){const e=Date.now();Object.keys(window.pbjs.adUnitExpire).forEach(i=>{e>window.pbjs.adUnitExpire[i]&&(delete window.pbjs.adUnitExpire[i],window.pbjs.que.push(()=>{window.pbjs.analyticAdapterOptions.data[i]&&(Object.keys(window.pbjs.analyticAdapterOptions.data[i]).forEach(e=>{window.pbjs.removeAdUnit(e)}),delete window.pbjs.analyticAdapterOptions.data[i])})),window.pbjs.eventBidWonFuncs[i]&&e>window.pbjs.eventBidWonFuncs[i].expire&&delete window.pbjs.eventBidWonFuncs[i]}),setTimeout(cleanerAdUnitExpire,6e4)}window.startTime=window.startTime||Date.now(),window.PWT={},window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.pbjs.analyticAdapterOptions={version:"1.0",data:{}},window.pbjs.adUnitExpire={},window.pbjs.eventBidWonFuncs={},window.pbjs.que.push(function(){window.pbjs.enableAnalytics([{provider:"nextMillennium",options:window.pbjs.analyticAdapterOptions}]),window.pbjs.onEvent("bidWon",function(e){window.pbjs.eventBidWonFuncs[e.auctionId]&&window.pbjs.eventBidWonFuncs[e.auctionId].func(e)})}),cleanerAdUnitExpire();
